# FastAPI プロジェクト プログラムチェックリスト (PCL)

## 🚀 プロジェクト初期設定

### 環境設定
- [ ] Python 3.8+ がインストールされている
- [ ] 仮想環境を作成・有効化している (`python -m venv venv`)
- [ ] FastAPI をインストールしている (`pip install fastapi`)
- [ ] Uvicorn をインストールしている (`pip install uvicorn`)
- [ ] requirements.txt を作成・更新している
- [ ] .gitignore ファイルを作成している（`__pycache__`, `.env`, `venv/` など）

### プロジェクト構造
- [ ] 適切なディレクトリ構造を作成している
```
project/
├── app/
│   ├── __init__.py
│   ├── main.py
│   ├── api/
│   ├── core/
│   ├── db/
│   ├── models/
│   ├── schemas/
│   └── services/
├── tests/
├── requirements.txt
├── .env
└── README.md
```

## 📋 コーディング標準

### ファイル・モジュール構成
- [ ] main.py でFastAPIアプリケーションを初期化している
- [ ] APIルートを適切に分離している (`/api/v1/` など)
- [ ] 設定ファイルを分離している (`core/config.py`)
- [ ] 依存性注入を適切に使用している
- [ ] 各モジュールに `__init__.py` が存在している

### コード品質
- [ ] 関数・クラスに適切なドキュメント文字列を記述している
- [ ] 型ヒント（Type Hints）を使用している
- [ ] PEP 8 スタイルガイドに従っている
- [ ] 関数名・変数名が分かりやすい
- [ ] 長い関数を適切に分割している（1関数20行以内推奨）

## 🔐 セキュリティ

### 認証・認可
- [ ] パスワードハッシュ化を実装している (`passlib`, `bcrypt`)
- [ ] JWT トークン認証を実装している
- [ ] トークンの有効期限を設定している
- [ ] 適切な権限管理を実装している
- [ ] センシティブな情報を環境変数で管理している

### データ保護
- [ ] SQLインジェクション対策をしている（ORM使用）
- [ ] CORS設定を適切に行っている
- [ ] 入力値検証を実装している（Pydantic）
- [ ] レート制限を実装している
- [ ] HTTPS通信を使用している（本番環境）

## 💾 データベース

### 設計・実装
- [ ] データベース接続設定を環境変数で管理している
- [ ] SQLAlchemy ORM を使用している
- [ ] マイグレーション管理を実装している（Alembic）
- [ ] モデル定義が適切である
- [ ] リレーションシップが正しく定義されている
- [ ] インデックスが適切に設定されている

### パフォーマンス
- [ ] N+1問題を回避している
- [ ] 適切なクエリ最適化をしている
- [ ] データベース接続プールを使用している
- [ ] 不要なデータの取得を避けている

## 🔄 API設計

### エンドポイント設計
- [ ] RESTful API設計原則に従っている
- [ ] 適切なHTTPメソッドを使用している（GET, POST, PUT, DELETE）
- [ ] 一貫性のあるURL命名規則を使用している
- [ ] バージョニング戦略を実装している (`/api/v1/`)
- [ ] 適切なHTTPステータスコードを返している

### リクエスト・レスポンス
- [ ] Pydanticスキーマでリクエスト検証をしている
- [ ] レスポンススキーマを定義している
- [ ] エラーレスポンスが一貫している
- [ ] ページネーションを実装している（必要に応じて）
- [ ] 適切なContent-Typeを設定している

## 📊 ログ・監視

### ログ出力
- [ ] 構造化ログを実装している
- [ ] ログレベルを適切に設定している（DEBUG, INFO, WARNING, ERROR）
- [ ] リクエスト・レスポンスログを記録している
- [ ] エラーログに十分な情報を含めている
- [ ] 本番環境でのログローテーションを設定している

### 監視・メトリクス
- [ ] ヘルスチェックエンドポイントを実装している
- [ ] アプリケーションメトリクスを収集している
- [ ] パフォーマンス監視を実装している
- [ ] アラート設定をしている（本番環境）

## ✅ テスト

### テスト実装
- [ ] pytest を使用している
- [ ] ユニットテストを作成している
- [ ] 統合テストを作成している
- [ ] APIエンドポイントのテストを作成している
- [ ] テストカバレッジが80%以上である
- [ ] テストデータベースを分離している

### テスト品質
- [ ] テストが独立して実行できる
- [ ] テストが高速に実行される
- [ ] エッジケースをテストしている
- [ ] モックを適切に使用している
- [ ] CI/CDでテストが自動実行される

## 🚀 デプロイメント

### 本番環境準備
- [ ] 環境変数を適切に設定している
- [ ] Docker コンテナ化をしている
- [ ] docker-compose.yml を作成している
- [ ] 本番用のrequirements.txtを作成している
- [ ] ログ設定を本番用に調整している

### インフラ・運用
- [ ] リバースプロキシを設定している（Nginx など）
- [ ] SSL証明書を設定している
- [ ] データベースのバックアップ戦略がある
- [ ] 監視・アラート設定をしている
- [ ] ロードバランシングを考慮している（必要に応じて）

## 📚 ドキュメント

### 技術文書
- [ ] README.md を作成している
- [ ] API仕様書を作成している（OpenAPI/Swagger）
- [ ] セットアップ手順を記載している
- [ ] 環境変数の説明を記載している
- [ ] トラブルシューティングガイドを作成している

### コード品質
- [ ] インラインコメントが適切である
- [ ] 複雑なロジックに説明コメントがある
- [ ] API仕様がSwagger UIで確認できる
- [ ] 変更履歴を管理している（CHANGELOG.md）

## 🔍 レビュー・保守

### コードレビュー
- [ ] プルリクエストでコードレビューをしている
- [ ] セキュリティ観点でのレビューをしている
- [ ] パフォーマンス観点でのレビューをしている
- [ ] テストコードもレビューしている

### 継続的改善
- [ ] 定期的な依存関係更新をしている
- [ ] セキュリティ脆弱性チェックをしている
- [ ] パフォーマンス監視・改善をしている
- [ ] リファクタリングを定期的に実施している

---

## 📝 チェックリスト使用方法

1. **プロジェクト開始時**: 初期設定セクションから順番にチェック
2. **開発中**: コーディング標準とAPI設計を継続的にチェック
3. **テスト実装時**: テストセクションを重点的にチェック
4. **デプロイ前**: セキュリティとデプロイメントセクションを確認
5. **リリース後**: 監視・保守セクションを定期的にチェック

このチェックリストを使用することで、品質の高いFastAPIアプリケーションを開発・運用できます。
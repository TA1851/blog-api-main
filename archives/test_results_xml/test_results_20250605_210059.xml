<?xml version="1.0" encoding="utf-8"?><testsuites><testsuite name="pytest" errors="0" failures="6" skipped="0" tests="44" time="1.790" timestamp="2025-06-05T21:00:59.569151+09:00" hostname="osakatatsuhikonoMac-mini.local"><testcase classname="tests.test_user_router.TestUserRouterEnvironmentVariables" name="test_allowed_email_domains_configuration" time="0.001" /><testcase classname="tests.test_user_router.TestUserRouterEnvironmentVariables" name="test_enable_domain_restriction_configuration" time="0.000" /><testcase classname="tests.test_user_router.TestUserRouterEnvironmentVariables" name="test_enable_email_verification_configuration" time="0.000" /><testcase classname="tests.test_user_router.TestUserRouterExceptions" name="test_user_not_found_error_with_id" time="0.000" /><testcase classname="tests.test_user_router.TestUserRouterExceptions" name="test_user_not_found_error_with_email" time="0.000" /><testcase classname="tests.test_user_router.TestUserRouterExceptions" name="test_user_not_found_error_default" time="0.000" /><testcase classname="tests.test_user_router.TestUserRouterExceptions" name="test_email_verification_error" time="0.000" /><testcase classname="tests.test_user_router.TestUserRouterExceptions" name="test_database_error" time="0.000" /><testcase classname="tests.test_user_router.TestCreateUserEndpoint" name="test_create_user_missing_email" time="0.004" /><testcase classname="tests.test_user_router.TestCreateUserEndpoint" name="test_create_user_domain_restriction_enabled_invalid_domain" time="0.020" /><testcase classname="tests.test_user_router.TestCreateUserEndpoint" name="test_create_user_duplicate_email" time="0.004" /><testcase classname="tests.test_user_router.TestCreateUserEndpoint" name="test_create_user_email_verification_enabled_new_user" time="0.007" /><testcase classname="tests.test_user_router.TestCreateUserEndpoint" name="test_create_user_email_verification_enabled_existing_verified" time="0.005" /><testcase classname="tests.test_user_router.TestCreateUserEndpoint" name="test_create_user_email_verification_enabled_existing_unverified" time="0.005" /><testcase classname="tests.test_user_router.TestCreateUserEndpoint" name="test_create_user_email_verification_disabled" time="0.004" /><testcase classname="tests.test_user_router.TestCreateUserEndpoint" name="test_create_user_database_error" time="0.004" /><testcase classname="tests.test_user_router.TestVerifyEmailEndpoint" name="test_verify_email_invalid_token_format" time="0.002" /><testcase classname="tests.test_user_router.TestVerifyEmailEndpoint" name="test_verify_email_token_not_found" time="0.003" /><testcase classname="tests.test_user_router.TestVerifyEmailEndpoint" name="test_verify_email_already_verified" time="0.003" /><testcase classname="tests.test_user_router.TestVerifyEmailEndpoint" name="test_verify_email_expired_token" time="0.002" /><testcase classname="tests.test_user_router.TestVerifyEmailEndpoint" name="test_verify_email_success" time="0.004" /><testcase classname="tests.test_user_router.TestVerifyEmailEndpoint" name="test_verify_email_success_with_custom_password" time="0.004" /><testcase classname="tests.test_user_router.TestVerifyEmailEndpoint" name="test_verify_email_url_decoding" time="0.005" /><testcase classname="tests.test_user_router.TestShowUserEndpoint" name="test_show_user_access_other_user" time="0.001" /><testcase classname="tests.test_user_router.TestShowUserEndpoint" name="test_show_user_not_found" time="0.002" /><testcase classname="tests.test_user_router.TestShowUserEndpoint" name="test_show_user_success" time="0.003" /><testcase classname="tests.test_user_router.TestDeleteUserAccountEndpoint" name="test_delete_user_account_user_not_found" time="0.025"><failure message="AssertionError: assert 500 == 404&#10; +  where 500 = HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f').status_code&#10; +    where HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') = &lt;ExceptionInfo HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') tblen=5&gt;.value&#10; +  and   404 = status.HTTP_404_NOT_FOUND">tests/test_user_router.py:480: in test_delete_user_account_user_not_found
    assert exc_info.value.status_code == status.HTTP_404_NOT_FOUND
E   AssertionError: assert 500 == 404
E    +  where 500 = HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f').status_code
E    +    where HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') = &lt;ExceptionInfo HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') tblen=5&gt;.value
E    +  and   404 = status.HTTP_404_NOT_FOUND</failure></testcase><testcase classname="tests.test_user_router.TestDeleteUserAccountEndpoint" name="test_delete_user_account_no_password_set" time="0.003"><failure message="AssertionError: assert 500 == 400&#10; +  where 500 = HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f').status_code&#10; +    where HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') = &lt;ExceptionInfo HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') tblen=5&gt;.value&#10; +  and   400 = status.HTTP_400_BAD_REQUEST">tests/test_user_router.py:492: in test_delete_user_account_no_password_set
    assert exc_info.value.status_code == status.HTTP_400_BAD_REQUEST
E   AssertionError: assert 500 == 400
E    +  where 500 = HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f').status_code
E    +    where HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') = &lt;ExceptionInfo HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') tblen=5&gt;.value
E    +  and   400 = status.HTTP_400_BAD_REQUEST</failure></testcase><testcase classname="tests.test_user_router.TestDeleteUserAccountEndpoint" name="test_delete_user_account_wrong_password" time="0.003"><failure message="AssertionError: assert 500 == 401&#10; +  where 500 = HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f').status_code&#10; +    where HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') = &lt;ExceptionInfo HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') tblen=5&gt;.value&#10; +  and   401 = status.HTTP_401_UNAUTHORIZED">tests/test_user_router.py:508: in test_delete_user_account_wrong_password
    assert exc_info.value.status_code == status.HTTP_401_UNAUTHORIZED
E   AssertionError: assert 500 == 401
E    +  where 500 = HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f').status_code
E    +    where HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') = &lt;ExceptionInfo HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') tblen=5&gt;.value
E    +  and   401 = status.HTTP_401_UNAUTHORIZED</failure></testcase><testcase classname="tests.test_user_router.TestDeleteUserAccountEndpoint" name="test_delete_user_account_no_email" time="0.003"><failure message="AssertionError: assert 500 == 400&#10; +  where 500 = HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f').status_code&#10; +    where HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') = &lt;ExceptionInfo HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') tblen=5&gt;.value&#10; +  and   400 = status.HTTP_400_BAD_REQUEST">tests/test_user_router.py:524: in test_delete_user_account_no_email
    assert exc_info.value.status_code == status.HTTP_400_BAD_REQUEST
E   AssertionError: assert 500 == 400
E    +  where 500 = HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f').status_code
E    +    where HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') = &lt;ExceptionInfo HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') tblen=5&gt;.value
E    +  and   400 = status.HTTP_400_BAD_REQUEST</failure></testcase><testcase classname="tests.test_user_router.TestDeleteUserAccountEndpoint" name="test_delete_user_account_success" time="0.006"><failure message="fastapi.exceptions.HTTPException: 500: 退会処理中に予期しないエラーが発生しました">routers/user.py:466: in delete_user_account
    認証ユーザー: {current_user.email}"
E   AttributeError: 'Depends' object has no attribute 'email'

During handling of the above exception, another exception occurred:
tests/test_user_router.py:562: in test_delete_user_account_success
    result = asyncio.run(delete_user_account(valid_deletion_request, mock_db))
/opt/homebrew/Cellar/python@3.11/3.11.11/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py:190: in run
    return runner.run(main)
/opt/homebrew/Cellar/python@3.11/3.11.11/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
/opt/homebrew/Cellar/python@3.11/3.11.11/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py:654: in run_until_complete
    return future.result()
routers/user.py:569: in delete_user_account
    raise HTTPException(
E   fastapi.exceptions.HTTPException: 500: 退会処理中に予期しないエラーが発生しました</failure></testcase><testcase classname="tests.test_user_router.TestDeleteUserAccountEndpoint" name="test_delete_user_account_password_mismatch" time="0.003"><failure message="AssertionError: assert 500 == 400&#10; +  where 500 = HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f').status_code&#10; +    where HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') = &lt;ExceptionInfo HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') tblen=5&gt;.value&#10; +  and   400 = status.HTTP_400_BAD_REQUEST">tests/test_user_router.py:583: in test_delete_user_account_password_mismatch
    assert exc_info.value.status_code == status.HTTP_400_BAD_REQUEST
E   AssertionError: assert 500 == 400
E    +  where 500 = HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f').status_code
E    +    where HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') = &lt;ExceptionInfo HTTPException(status_code=500, detail='\u9000\u4f1a\u51e6\u7406\u4e2d\u306b\u4e88\u671f\u3057\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f') tblen=5&gt;.value
E    +  and   400 = status.HTTP_400_BAD_REQUEST</failure></testcase><testcase classname="tests.test_user_router.TestDeleteUserAccountEndpoint" name="test_delete_user_account_database_error" time="0.003" /><testcase classname="tests.test_user_router.TestResendVerificationEmailEndpoint" name="test_resend_verification_email_not_found" time="0.002" /><testcase classname="tests.test_user_router.TestResendVerificationEmailEndpoint" name="test_resend_verification_email_success" time="0.003" /><testcase classname="tests.test_user_router.TestUserRouterIntegration" name="test_router_configuration" time="0.000" /><testcase classname="tests.test_user_router.TestUserRouterIntegration" name="test_router_endpoints_exist" time="0.000" /><testcase classname="tests.test_user_router.TestUserRouterEdgeCases" name="test_create_user_with_name_field" time="0.004" /><testcase classname="tests.test_user_router.TestUserRouterEdgeCases" name="test_verify_email_empty_token" time="0.001" /><testcase classname="tests.test_user_router.TestUserRouterEdgeCases" name="test_verify_email_none_expires_at" time="0.004" /><testcase classname="tests.test_user_router.TestDeleteUserAccountWithAuth" name="test_delete_user_account_unauthorized_different_email" time="0.003" /><testcase classname="tests.test_user_router.TestDeleteUserAccountWithAuth" name="test_delete_user_account_success_with_auth" time="0.006" /><testcase classname="tests.test_user_router.TestDeleteUserAccountWithAuth" name="test_delete_user_account_password_mismatch_with_auth" time="0.003" /><testcase classname="tests.test_user_router.TestDeleteUserAccountWithAuth" name="test_delete_user_account_wrong_password_with_auth" time="0.004" /></testsuite></testsuites>